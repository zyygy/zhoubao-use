webpackJsonp([26],{"/ipV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"LoveItem",data:function(){return{dianzans:"",state:!1}},props:{id:"",userName:"",avatarUrl:"",content:"",create_time:""},computed:{timeFormat:function(){var t=new Date(this.create_time),e=new Date,a=t.getHours()+":"+t.getMinutes();if(0==t.toLocaleDateString().localeCompare(e.toLocaleDateString()))return a;var n=(new Date(e.toLocaleDateString()).getTime()-t.getTime())/1e3/60/60/24;return a=n<1?"昨天 "+a:n<2?"前天 "+a:t.getMonth()+1+"-"+t.getDate()+" "+a,t.getFullYear()!=e.getFullYear()&&(a=t.getFullYear()+"-"+a),a}},watch:{dianzans:function(){this.state=this.dianzanState()}},mounted:function(){this.getDianzansById()},methods:{dianzan:function(){if(this.state)wx.showToast({title:"已经点过了",icon:"success"});else{var t=this;this.qcloud.request({url:this.config.service.host+"/weapp/dianzan/"+t.id,method:"POST",success:function(e){console.log(e),wx.showToast({title:"点赞成功",icon:"success"}),t.state=!0,t.getDianzansById()},fail:function(t){console.log(t)}})}},getDianzansById:function(){var t=this;this.qcloud.request({url:this.config.service.host+"/weapp/dianzan/"+t.id,success:function(e){t.dianzans=e.data.data},fail:function(t){console.log(t)}})},dianzanState:function(){if(null!=this.dianzans){var t=this.qcloud.Session.get();if(t){var e=t.userinfo.openId;if(null!=e)for(var a=0;a<this.dianzans.length;a++)if(0==this.dianzans[a].openId.localeCompare(e))return!0}return!1}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10rpx"}},[a("van-panel",{attrs:{"use-footer-slot":""}},[a("view",{attrs:{slot:"header"},slot:"header"},[a("van-row",[a("van-col",{attrs:{span:"12",offset:"1"}},[a("image",{staticStyle:{width:"70rpx",height:"70rpx",margin:"7rpx"},attrs:{src:t.avatarUrl}}),t._v(" "),a("text",{staticStyle:{display:"inline-block",bottom:"25rpx",position:"relative"}},[t._v(t._s(t.userName))])]),t._v(" "),a("van-col",{attrs:{span:"7",offset:"4"}},[a("text",{staticStyle:{"font-size":"small",color:"lightgray",display:"inline-block",top:"16rpx",position:"relative"}},[t._v(t._s(t.timeFormat))])])],1)],1),t._v(" "),a("view",{attrs:{slot:"footer"},slot:"footer"},[a("van-row",{attrs:{gutter:"20"}},[a("van-col",{attrs:{span:"12",offset:"3"}},t._l(t.dianzans,function(t,e){return a("image",{key:e,staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:t.avatarUrl}})}),0),t._v(" "),a("van-col",{attrs:{span:"3",offset:"18"},on:{click:t.dianzan}},[a("van-icon",{attrs:{name:t.state?"like":"like-o",color:t.state?"#f47983":"grey",size:"1.2em"}})],1)],1)],1),t._v(" "),a("van-row",[a("van-col",{attrs:{span:"17",offset:"4"}},[a("view",{staticStyle:{margin:"2% 0%"}},[t._v(t._s(t.content))])])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(t){a("wYWu")},null,null);e.default=s.exports},wYWu:function(t,e){}});
//# sourceMappingURL=26.84729064026d317f0c00.js.map