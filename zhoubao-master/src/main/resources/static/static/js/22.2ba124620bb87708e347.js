webpackJsonp([22],{Yk9r:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),o={name:"TableEdit",data:function(){return{ids:[],weekName:["周一","周二","周三","周四","周五","周六","周日"],select2:"",sectionAll:"",userName:[],sectionitems:[[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}]]}},props:{details:Array},computed:{},mounted:function(){this.userName=this.Cookies.get("userName"),this.getSection()},methods:{weekNo:function(e){return(e.getDay()+6)%7},getSection:function(){var e=this;this.axios.get("/getSection/"+e.userName+"/-1").then(function(t){if(0!=t.data.length){e.sectionAll=t.data;for(var i=0,s=0;s<e.sectionitems.length;s++)for(var a=0;a<e.sectionitems[s].length;a++)e.sectionitems[s].splice(a,1,e.sectionAll[i++])}})},editDone:function(){if("-1"==this.sectionitems[0][0].id){this.sectionAll=[];for(var e=0,t=0;t<this.sectionitems.length;t++)for(var i=0;i<this.sectionitems[t].length;i++)this.sectionitems[t][i].userName=this.userName,this.sectionitems[t][i].no=e++,this.sectionAll.push(this.sectionitems[t][i]);var s=this;this.axios({url:"/saveSection/",method:"post",data:a()(s.sectionAll),headers:{"Content-Type":"application/json"}}).then(function(e){s.ids=e.data;for(var t=0,i=0;i<s.sectionitems.length;i++)for(var a=0;a<s.sectionitems[i].length;a++)s.sectionitems[i][a].id=s.ids[t++]})}else{this.sectionAll=[];for(t=0;t<this.sectionitems.length;t++)for(i=0;i<this.sectionitems[t].length;i++)this.sectionAll.push(this.sectionitems[t][i]);s=this;this.axios({url:"/updateSection/",method:"post",data:a()(s.sectionAll),headers:{"Content-Type":"application/json"}})}alert("表格已保存")},editCell:function(e){var t=e.class;0==e.detailid?0==t.localeCompare("other")?e.class="wenzi":0==t.localeCompare("wenzi")?e.class="other":0==t.localeCompare("lianxi")&&(e.class="wenzi"):0==t.localeCompare("other")?e.class="lianxi":0==t.localeCompare("wenzi")&&(e.class="lianxi")},editDetailId:function(e){e.detailid=this.select2[0].id,e.head="练习"+(this.select2[1]+1)+" "+this.select2[0].head,e.class="lianxi",this.select2=""}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",[i("tr",[i("th",{staticStyle:{color:"steelblue",padding:"1%"},on:{click:e.editDone}},[e._v("保存表格")]),e._v(" "),i("th",[e._v("上午")]),e._v(" "),i("th",[e._v("下午")]),e._v(" "),i("th",[e._v("晚上")])]),e._v(" "),e._l(e.sectionitems,function(t,s){return i("tr",[i("th",[e._v(e._s(e.weekName[s]))]),e._v(" "),e._l(t,function(t){return i("td",{class:t.class,on:{click:function(i){return i.target!==i.currentTarget?null:e.editCell(t)}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.head,expression:"section.head"}],staticStyle:{width:"80%",height:"70%","font-size":"1.3em"},domProps:{value:t.head},on:{input:function(i){i.target.composing||e.$set(t,"head",i.target.value)}}}),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.select2,expression:"select2"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.select2=t.target.multiple?i:i[0]},function(i){return e.editDetailId(t)}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("请选择")]),e._v(" "),e._l(e.details,function(t,s){return i("option",{domProps:{value:[t,s]}},[e._v("练习"+e._s(s+1)+" "+e._s(t.head))])})],2)])})],2)})],2),e._v(" "),i("el-calendar",{attrs:{range:["2019-05-27","2019-06-02"]},scopedSlots:e._u([{key:"dateCell",fn:function(t){var s=t.date,a=t.data;return[i("p",{class:a.isSelected?"is-selected":""},[e._v("\n\t  \t\t  "+e._s(a.day.split("-").slice(1).join("-"))+" "+e._s(a.isSelected?"✔️":"")+"\n\t\t\t  \n\t  \t\t")]),e._v(" "),i("div",[i("tr",[i("td",[e._v("上午")]),e._v(" "),i("td",{class:e.sectionitems[e.weekNo(s)][0].class,on:{click:function(t){if(t.target!==t.currentTarget)return null;e.editCell(e.sectionitems[e.weekNo(s)][0])}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sectionitems[e.weekNo(s)][0].head,expression:"sectionitems[weekNo(date)][0].head"}],staticStyle:{width:"80%",height:"70%","font-size":"1.3em"},domProps:{value:e.sectionitems[e.weekNo(s)][0].head},on:{input:function(t){t.target.composing||e.$set(e.sectionitems[e.weekNo(s)][0],"head",t.target.value)}}}),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.select2,expression:"select2"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.select2=t.target.multiple?i:i[0]},function(t){e.editDetailId(e.sectionitems[e.weekNo(s)][0])}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("请选择")]),e._v(" "),e._l(e.details,function(t,s){return i("option",{domProps:{value:[t,s]}},[e._v("练习"+e._s(s+1)+" "+e._s(t.head))])})],2)])]),e._v(" "),i("tr",[i("td",[e._v("下午")]),e._v(" "),i("td",{class:e.sectionitems[e.weekNo(s)][1].class,on:{click:function(t){if(t.target!==t.currentTarget)return null;e.editCell(e.sectionitems[e.weekNo(s)][1])}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sectionitems[e.weekNo(s)][1].head,expression:"sectionitems[weekNo(date)][1].head"}],staticStyle:{width:"80%",height:"70%","font-size":"1.3em"},domProps:{value:e.sectionitems[e.weekNo(s)][1].head},on:{input:function(t){t.target.composing||e.$set(e.sectionitems[e.weekNo(s)][1],"head",t.target.value)}}}),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.select2,expression:"select2"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.select2=t.target.multiple?i:i[0]},function(t){e.editDetailId(e.sectionitems[e.weekNo(s)][1])}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("请选择")]),e._v(" "),e._l(e.details,function(t,s){return i("option",{domProps:{value:[t,s]}},[e._v("练习"+e._s(s+1)+" "+e._s(t.head))])})],2)])]),e._v(" "),i("tr",[i("td",[e._v("晚上")]),e._v(" "),i("td",{class:e.sectionitems[e.weekNo(s)][2].class,on:{click:function(t){if(t.target!==t.currentTarget)return null;e.editCell(e.sectionitems[e.weekNo(s)][2])}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sectionitems[e.weekNo(s)][2].head,expression:"sectionitems[weekNo(date)][2].head"}],staticStyle:{width:"80%",height:"70%","font-size":"1.3em"},domProps:{value:e.sectionitems[e.weekNo(s)][2].head},on:{input:function(t){t.target.composing||e.$set(e.sectionitems[e.weekNo(s)][2],"head",t.target.value)}}}),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.select2,expression:"select2"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.select2=t.target.multiple?i:i[0]},function(t){e.editDetailId(e.sectionitems[e.weekNo(s)][2])}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("请选择")]),e._v(" "),e._l(e.details,function(t,s){return i("option",{domProps:{value:[t,s]}},[e._v("练习"+e._s(s+1)+" "+e._s(t.head))])})],2)])])])]}}])})],1)},staticRenderFns:[]};var l=i("VU/8")(o,n,!1,function(e){i("mjWP")},"data-v-69631f78",null);t.default=l.exports},mjWP:function(e,t){}});
//# sourceMappingURL=22.2ba124620bb87708e347.js.map