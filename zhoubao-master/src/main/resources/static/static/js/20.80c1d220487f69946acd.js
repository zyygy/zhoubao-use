webpackJsonp([20],{"7rEm":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("FHp2"),n={name:"DetailEdit",data:function(){return{visible:!1}},props:{detail:Object,index:"",isPro:""},components:{UploadImg:a.default},methods:{openDelImg:function(e){var t=this;this.$confirm("此操作将永久删除该图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delImg(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},afterUploadImg:function(e){this.detail.imgSrc=e,this.$parent.$parent.$parent.SaveDatail()},delDetail:function(e){var t=this;this.axios({url:"/htmlZhoubao/delDetail/"+e,method:"get"}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.$parent.$parent.$parent.getDetail()})},delImg:function(e){if(e){var t=this;this.axios({url:"/img/delImg",method:"post",data:{filePath:e},headers:{"Content-Type":"application/json"}}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.detail.imgSrc=""})}}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return-2!=e.detail.id?i("div",{staticClass:"Detail"},[i("span",{staticClass:"head"},[e._v("片段"+e._s(e.index)+" ")]),e._v(" "),i("el-input",{staticStyle:{width:"20%",color:"#000000","font-size":"large","font-weight":"1000"},attrs:{placeholder:"请输入标题"},model:{value:e.detail.head,callback:function(t){e.$set(e.detail,"head",t)},expression:"detail.head"}}),e._v(" "),-1!=e.detail.id?i("el-button-group",[i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("p",[e._v("确定删除这个片段以及包含的图片吗？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.visible=!1,e.delDetail(e.detail.id),e.delImg(e.detail.imgSrc)}}},[e._v("确定")])],1),e._v(" "),i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1)],1):e._e(),e._v(" "),i("br"),e._v(" "),i("el-input",{staticStyle:{margin:"1% 0%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:e.detail.content,callback:function(t){e.$set(e.detail,"content",t)},expression:"detail.content"}}),e._v(" "),e.detail.imgSrc?i("img",{attrs:{src:e.isPro?e.detail.imgSrc:"/api/zhouBaoSpring/"+e.detail.imgSrc},on:{click:function(t){return e.openDelImg(e.detail.imgSrc)}}}):e._e(),e._v(" "),e.detail.imgSrc?e._e():i("div",{staticStyle:{width:"100%",margin:"0% 0%"}},[i("UploadImg",{attrs:{userName:e.detail.userName,callback:e.afterUploadImg}})],1)],1):e._e()},staticRenderFns:[]};var s=i("VU/8")(n,l,!1,function(e){i("YQOg")},"data-v-e445b940",null);t.default=s.exports},YQOg:function(e,t){}});
//# sourceMappingURL=20.80c1d220487f69946acd.js.map