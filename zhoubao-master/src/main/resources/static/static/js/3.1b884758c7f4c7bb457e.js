webpackJsonp([3,20,27],{"7rEm":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("FHp2"),s={name:"DetailEdit",data:function(){return{visible:!1}},props:{detail:Object,index:"",isPro:""},components:{UploadImg:a.default},methods:{openDelImg:function(e){var t=this;this.$confirm("此操作将永久删除该图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delImg(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},afterUploadImg:function(e){this.detail.imgSrc=e,this.$parent.$parent.$parent.SaveDatail()},delDetail:function(e){var t=this;this.axios({url:"/htmlZhoubao/delDetail/"+e,method:"get"}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.$parent.$parent.$parent.getDetail()})},delImg:function(e){if(e){var t=this;this.axios({url:"/img/delImg",method:"post",data:{filePath:e},headers:{"Content-Type":"application/json"}}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.detail.imgSrc=""})}}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return-2!=e.detail.id?i("div",{staticClass:"Detail"},[i("span",{staticClass:"head"},[e._v("片段"+e._s(e.index)+" ")]),e._v(" "),i("el-input",{staticStyle:{width:"20%",color:"#000000","font-size":"large","font-weight":"1000"},attrs:{placeholder:"请输入标题"},model:{value:e.detail.head,callback:function(t){e.$set(e.detail,"head",t)},expression:"detail.head"}}),e._v(" "),-1!=e.detail.id?i("el-button-group",[i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("p",[e._v("确定删除这个片段以及包含的图片吗？")]),e._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.visible=!1,e.delDetail(e.detail.id),e.delImg(e.detail.imgSrc)}}},[e._v("确定")])],1),e._v(" "),i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1)],1):e._e(),e._v(" "),i("br"),e._v(" "),i("el-input",{staticStyle:{margin:"1% 0%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:e.detail.content,callback:function(t){e.$set(e.detail,"content",t)},expression:"detail.content"}}),e._v(" "),e.detail.imgSrc?i("img",{attrs:{src:e.isPro?e.detail.imgSrc:"/api/zhouBaoSpring/"+e.detail.imgSrc},on:{click:function(t){return e.openDelImg(e.detail.imgSrc)}}}):e._e(),e._v(" "),e.detail.imgSrc?e._e():i("div",{staticStyle:{width:"100%",margin:"0% 0%"}},[i("UploadImg",{attrs:{userName:e.detail.userName,callback:e.afterUploadImg}})],1)],1):e._e()},staticRenderFns:[]};var n=i("VU/8")(s,l,!1,function(e){i("YQOg")},"data-v-e445b940",null);t.default=n.exports},ITDa:function(e,t){},P3wg:function(e,t){},UCk6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),l={name:"TableEdit",data:function(){return{ids:[],weekName:["周一","周二","周三","周四","周五","周六","周日"],select2:"",sectionAll:[],userName:[],inputAll:"上课",sectionitems:[[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}],[{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""},{id:"-1",userName:"",no:"0",head:"上课",class:"other",detailid:"0",time:"",week:""}]]}},props:{details:Array},mounted:function(){this.userName=this.Cookies.get("userName"),this.getSection()},watch:{sectionAll:function(){for(var e=0,t=0;t<this.sectionitems.length;t++)for(var i=0;i<this.sectionitems[t].length;i++)this.sectionitems[t].splice(i,1,this.sectionAll[e++])}},methods:{getSection:function(){var e=this;this.axios.get("/htmlZhoubao/getSection/"+e.userName+"/-1").then(function(t){0!=t.data.length&&(e.sectionAll=t.data)})},allIn:function(){for(var e=0;e<this.sectionitems.length;e++)for(var t=0;t<this.sectionitems[e].length;t++)this.sectionitems[e][t].head=this.inputAll},editDone:function(){if("-1"==this.sectionitems[0][0].id){this.sectionAll=[];for(var e=0,t=0;t<this.sectionitems.length;t++)for(var i=0;i<this.sectionitems[t].length;i++)this.sectionitems[t][i].userName=this.userName,this.sectionitems[t][i].no=e++,this.sectionAll.push(this.sectionitems[t][i]);var a=this;this.axios({url:"/htmlZhoubao/saveSection/",method:"post",data:s()(a.sectionAll),headers:{"Content-Type":"application/json"}}).then(function(e){0!=e.data.length&&(a.sectionAll=e.data)})}else{this.sectionAll=[];for(t=0;t<this.sectionitems.length;t++)for(i=0;i<this.sectionitems[t].length;i++)this.sectionAll.push(this.sectionitems[t][i]);a=this;this.axios({url:"/htmlZhoubao/updateSection/",method:"post",data:s()(a.sectionAll),headers:{"Content-Type":"application/json"}})}this.$message({message:"表格保存成功",type:"success"})},editCell:function(e){var t=e.class;0==e.detailid?0==t.localeCompare("other")?e.class="wenzi":0==t.localeCompare("wenzi")?e.class="other":0==t.localeCompare("lianxi")&&(e.class="wenzi"):0==t.localeCompare("other")?e.class="lianxi":0==t.localeCompare("wenzi")&&(e.class="lianxi")},editDetailId:function(e){e.detailid=this.select2[0].id,e.head="练习"+(this.select2[1]+1)+" "+this.select2[0].head,e.class="lianxi",this.select2="",this.$message({message:"表格绑定练习成功",type:"success"})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",[i("tr",[i("th",{staticStyle:{padding:"1%"},on:{click:function(e){}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputAll,expression:"inputAll"}],staticStyle:{border:"1px solid lightgray",margin:"1%"},attrs:{placeholder:"批量填充内容"},domProps:{value:e.inputAll},on:{input:function(t){t.target.composing||(e.inputAll=t.target.value)}}}),e._v(" "),i("el-button",{on:{click:e.allIn}},[e._v("批量填充")])],1),e._v(" "),i("th",[e._v("上午")]),e._v(" "),i("th",[e._v("下午")]),e._v(" "),i("th",[e._v("晚上")])]),e._v(" "),e._l(e.sectionitems,function(t,a){return i("tr",[i("th",[e._v(e._s(e.weekName[a]))]),e._v(" "),e._l(t,function(t){return i("td",{class:t.class,on:{click:function(i){return i.target!==i.currentTarget?null:e.editCell(t)}}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.head,expression:"section.head"}],staticStyle:{width:"80%",height:"70%","font-size":"1.3em"},domProps:{value:t.head},on:{input:function(i){i.target.composing||e.$set(t,"head",i.target.value)}}}),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.select2,expression:"select2"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.select2=t.target.multiple?i:i[0]},function(i){return e.editDetailId(t)}]}},[i("option",{attrs:{disabled:"",value:""}},[e._v("请关联练习")]),e._v(" "),e._l(e.details,function(t,a){return i("option",{domProps:{value:[t,a]}},[e._v("片段"+e._s(a+1)+" "+e._s(t.head))])})],2)])})],2)})],2)])},staticRenderFns:[]};var o=i("VU/8")(l,n,!1,function(e){i("P3wg")},"data-v-085b9f9b",null);t.default=o.exports},YQOg:function(e,t){},cOjv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),l=i("g4PW"),n=i.n(l),o=i("UCk6"),r=i("7rEm"),d=i("FHp2"),c={name:"HtmlEdit",data:function(){return{details:[],detailOne:{id:"-1",userName:this.Cookies.get("userName"),head:"",content:"",imgSrc:"",time:"",week:""},summary:{id:"-1",userName:"",content:"",time:"",week:""},userName:"",week:"",dialogTableVisible:!1,dialogHelpVisible:!1,dialogDetailVisible:!1,isPro:n()("production","production")}},components:{TableEdit:o.default,DetailEdit:r.default,UploadImg:d.default},mounted:function(){this.userName=this.Cookies.get("userName"),this.week=this.getWeekCount(new Date),this.shuaxin()},methods:{shuaxin:function(){this.getSummary(),this.getDetail()},getSummary:function(){var e=this;this.axios.get("/htmlZhoubao/getSummary/"+e.userName+"/-1").then(function(t){0!=t.data.length&&(e.summary=t.data[0])})},SaveSummary:function(){if("-1"==this.summary.id&&this.summary.content){this.summary.userName=this.userName;var e=this;this.axios({url:"/htmlZhoubao/saveSummary/",method:"post",data:s()(e.summary),headers:{"Content-Type":"application/json"}}).then(function(t){e.summary=t.data}),this.axios.get("/zhoubao/makeHtmlZhoubao/"+e.userName)}else{e=this;this.axios({url:"/htmlZhoubao/updateSummary/",method:"post",data:s()(e.summary),headers:{"Content-Type":"application/json"}})}},makeDetail:function(){this.details.push(this.detailOne),console.log(this.details),this.detailOne={id:"-1",userName:this.Cookies.get("userName"),head:"",content:"",imgSrc:"",time:"",week:""},this.SaveDatail()},getDetail:function(){var e=this;this.axios.get("/htmlZhoubao/getDetail/"+e.userName+"/"+-1).then(function(t){0!=t.data.length&&(e.details=t.data)})},SaveDatail:function(e){if(0!=(t=this).details.length){var t=this;this.axios({url:"/htmlZhoubao/saveDetail/",method:"post",data:s()(t.details),headers:{"Content-Type":"application/json"}}).then(function(e){e&&(t.details=e.data)})}},SaveAll:function(){this.SaveDatail(),this.SaveSummary(),this.$refs.TableEdit.editDone(),this.$message({message:"恭喜你，周报保存成功",type:"success"})},showZhoubao:function(){this.$router.push({name:"HtmlViewer",params:{userName:this.userName,week:this.week}})},getWeekCount:function(e){var t=new Date;t.setFullYear(2019,1,26);var i=e.getTime()-t.getTime()+3e3;return parseInt(i/864e5/7)+1}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{position:"fixed"},attrs:{"default-active":"1"}},[i("el-menu-item",{attrs:{index:"5"},on:{click:function(t){e.dialogHelpVisible=!0}}},[i("i",{staticClass:"el-icon-s-help"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("使用帮助")])]),e._v(" "),i("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.dialogDetailVisible=!0}}},[i("i",{staticClass:"el-icon-s-help"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加片段")])]),e._v(" "),i("el-menu-item",{attrs:{index:"4"},on:{click:e.showZhoubao}},[i("i",{staticClass:"el-icon-monitor"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("预览效果")])]),e._v(" "),i("el-menu-item",{attrs:{index:"2"},on:{click:e.SaveAll}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("保存周报")])])],1)],1),e._v(" "),i("el-main",[i("TableEdit",{ref:"TableEdit",attrs:{details:e.details}}),e._v(" "),i("div",{attrs:{id:"概述"}},[i("h2",[e._v("总结：")]),e._v(" "),i("el-input",{staticStyle:{color:"#000000","font-size":"large"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请写总结,总结未填写之前不会提交到老师端"},model:{value:e.summary.content,callback:function(t){e.$set(e.summary,"content",t)},expression:"summary.content"}}),e._v(" "),i("br"),i("br")],1),e._v(" "),e._l(e.details,function(t,a){return i("DetailEdit",{key:t.id,attrs:{isPro:e.isPro,detail:t,index:a+1}})}),e._v(" "),i("el-dialog",{attrs:{title:"新建详细周报片段",visible:e.dialogDetailVisible},on:{"update:visible":function(t){e.dialogDetailVisible=t}}},[i("DetailEdit",{attrs:{isPro:e.isPro,detail:e.detailOne}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogDetailVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDetailVisible=!1,e.makeDetail()}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"在线写周报帮助",visible:e.dialogHelpVisible},on:{"update:visible":function(t){e.dialogHelpVisible=t}}},[i("div",{staticStyle:{width:"80%",margin:"auto"}},[i("h3",[e._v("步骤 1 上传图片")]),e._v(" "),i("p",[e._v("上传周报图片每张图片可代表一个练习 上传后可进行编辑 (不需要图片可省略)")]),e._v(" "),i("h3",[e._v("步骤 2 填写表格 和图片详情")]),e._v(" "),i("p",[e._v("填写周报表格,可根据重要性单击单元格切换样式,如果第一步已上传图片可选择将对应练习关联起来")]),e._v(" "),i("h3",[e._v("步骤 3 填写总结 保存周报")]),e._v(" "),i("p",[e._v("总结填写前,周报不会发送到老师端,但依然可以保存,一般在每周末填写总结 保存后周报会同步到老师端")])])])],2)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(c,u,!1,function(e){i("ITDa")},"data-v-53a5b246",null);t.default=m.exports}});
//# sourceMappingURL=3.1b884758c7f4c7bb457e.js.map