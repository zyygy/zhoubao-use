webpackJsonp([13],{"6KYQ":function(e,t){},xJsL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"Login",data:function(){return{userName:"",userPwd:"",loadState:!1,login:!0,admin:!1,newUser:"",newPwd:"",twicePwd:"",professor:"",type:"",year:"",bingImg:""}},mounted:function(){this.getBingImgUrl()},methods:{yanzheng:function(e){this.loadState=!0;var t=this;this.axios({url:"/user/yanzheng/",method:"get",auth:{username:unescape(encodeURIComponent(this.userName)),password:unescape(encodeURIComponent(this.userPwd))},headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e),401==e.status?(t.$message({showClose:!0,message:"用户名或密码错误",type:"error"}),t.loadState=!1):1==e.data.type?(t.$notify({title:"欢迎阅览周报~",type:"success"}),t.$router.push("AdminHomePage")):0==e.data.type||2==e.data.type?(t.$notify({title:"成功",message:"已成功登录系统！",type:"success"}),t.$router.push("HomePage")):(t.$message({showClose:!0,message:"用户名或密码错误",type:"error"}),t.loadState=!1)}),this.Cookies.set("userName",this.userName,{expires:1})},existUserName:function(){var e=this;this.axios.get("existUserName/"+e.newUser).then(function(t){1==t.data&&(e.$message({showClose:!0,message:"用户名已存在，请重新输入~",type:"error"}),e.newUser="",e.$refs.newUser.focus())})},zhuce:function(){if(this.loadState=!0,!this.newUser||!this.newPwd)return this.$message({showClose:!0,message:"用户名或密码不能为空~",type:"error"}),void(this.loadState=!1);if(this.newPwd!=this.twicePwd)return this.$message({showClose:!0,message:"两次密码不相同，请重新输入~",type:"error"}),void(this.loadState=!1);if(0!=this.professor.localeCompare("蒋泽军")&&0!=this.professor.localeCompare("王丽芳"))return this.$message({showClose:!0,message:"导师姓名错误，身份验证失败~",type:"error"}),void(this.loadState=!1);if(0==this.type.length)return this.$message({showClose:!0,message:"未选择身份~",type:"error"}),void(this.loadState=!1);if(!this.year)return this.$message({showClose:!0,message:"未选择入学年份~",type:"error"}),void(this.loadState=!1);var e={userName:this.newUser,userPwd:this.newPwd,type:this.type,year:this.year.getFullYear()},t=this;this.axios({url:"zhuce/",method:"post",data:e,headers:{"Content-Type":"application/json"}}).then(function(e){0==e.data?(t.$message({showClose:!0,message:"注册失败，请联系管理员",type:"error"}),t.loadState=!1):1==e.data&&(t.$message({showClose:!0,message:"恭喜"+t.newUser+"注册成功,请登录",type:"success"}),t.loadState=!1,t.userName=t.newUser,t.login=!t.login)})},getBingImgUrl:function(){var e=this;this.axios.get("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1").then(function(t){e.bingImg="https://cn.bing.com/"+t.images[0].url})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%",height:"100%",padding:"8% 0% 17% 0%","background-image":"url('https://open.saintic.com/api/bingPic/')",transform:"rotateY(180deg)"}},[s("el-card",{staticClass:"box-card",staticStyle:{"background-color":"rgba(255,255,255,1)",transform:"rotateY(180deg)"}},[e.login?s("div",[s("div",{staticStyle:{"font-size":"1.2rem","text-align":"center",color:"#303133",width:"100%",margin:"8% auto","font-weight":"600"}},[e._v("每周工作汇报管理系统")]),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入用户名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.userPwd,callback:function(t){e.userPwd=t},expression:"userPwd"}}),e._v(" "),s("el-button",{staticStyle:{width:"84%",margin:"6% 8% 4% 8%"},attrs:{type:"primary",loading:e.loadState},on:{click:e.yanzheng}},[e._v("登录")]),e._v(" "),s("el-link",{staticStyle:{"font-size":"0.9rem",left:"8%",margin:"0.2%","font-weight":"500"},attrs:{type:"info"},on:{click:function(t){e.login=!e.login}}},[e._v("没有账号？点击注册")])],1):e._e(),e._v(" "),e.login?e._e():s("div",[e.admin?e._e():s("div",[s("div",{staticStyle:{"font-size":"1.2rem","text-align":"center",width:"100%",margin:"4% auto","font-weight":"600"}},[e._v("用户注册")]),e._v(" "),s("el-input",{ref:"newUser",staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入真实姓名"},on:{change:function(t){return e.existUserName()}},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.newPwd,callback:function(t){e.newPwd=t},expression:"newPwd"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请确认密码","show-password":""},model:{value:e.twicePwd,callback:function(t){e.twicePwd=t},expression:"twicePwd"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入预设暗号进行身份验证"},model:{value:e.professor,callback:function(t){e.professor=t},expression:"professor"}}),e._v(" "),s("el-select",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"硕士还是博士？"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[s("el-option",{attrs:{label:"硕士",value:0}}),e._v(" "),s("el-option",{attrs:{label:"博士",value:2}})],1),e._v(" "),s("el-date-picker",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{type:"year",placeholder:"请选择入学年份"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}}),e._v(" "),s("el-button",{staticStyle:{width:"84%",margin:"6% 8% 4% 8%"},attrs:{type:"primary",loading:e.loadState},on:{click:e.zhuce}},[e._v("注册")])],1),e._v(" "),e.admin?s("div",[s("div",{staticStyle:{"font-size":"1.2rem","text-align":"center",width:"100%",margin:"4% auto","font-weight":"600"}},[e._v("管理员注册")]),e._v(" "),s("el-input",{ref:"newUser",staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入用户名"},on:{change:function(t){return e.existUserName()}},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.newPwd,callback:function(t){e.newPwd=t},expression:"newPwd"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请确认密码","show-password":""},model:{value:e.twicePwd,callback:function(t){e.twicePwd=t},expression:"twicePwd"}}),e._v(" "),s("el-input",{staticStyle:{width:"84%",margin:"2% 8%"},attrs:{placeholder:"请设置暗号用于用户注册验证"},model:{value:e.professor,callback:function(t){e.professor=t},expression:"professor"}}),e._v(" "),s("el-button",{staticStyle:{width:"84%",margin:"6% 8% 4% 8%"},attrs:{type:"primary",loading:e.loadState},on:{click:e.zhuce}},[e._v("注册管理员")])],1):e._e(),e._v(" "),s("el-link",{staticStyle:{"font-size":"0.9rem",left:"8%",margin:"0.2%","font-weight":"500"},attrs:{type:"info"},on:{click:function(t){e.login=!e.login,e.admin=!1}}},[e._v("返回登录")]),e._v(" "),e.admin?e._e():s("el-link",{staticStyle:{"font-size":"0.9rem",left:"52%",margin:"0.2%","font-weight":"500"},attrs:{type:"info"},on:{click:function(t){e.admin=!e.admin}}},[e._v("注册管理员")])],1)])],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("6KYQ")},"data-v-830f288e",null);t.default=n.exports}});
//# sourceMappingURL=13.ab00490a44810bd1aa35.js.map