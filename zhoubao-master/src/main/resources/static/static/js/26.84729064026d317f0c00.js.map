{"version":3,"sources":["webpack:///src/components/quan/LoveItem.vue","webpack:///./src/components/quan/LoveItem.vue?a93c","webpack:///./src/components/quan/LoveItem.vue"],"names":["LoveItem","name","data","dianzans","state","props","id","userName","avatarUrl","content","create_time","computed","timeFormat","Date","this","now","ans","getHours","getMinutes","toLocaleDateString","localeCompare","riqicha","getTime","getMonth","getDate","getFullYear","watch","dianzanState","mounted","getDianzansById","methods","dianzan","wx","showToast","title","icon","self","qcloud","request","url","config","service","host","method","success","response","console","log","fail","err","session","Session","get","openId","userinfo","i","length","quan_LoveItem","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-top","attrs","use-footer-slot","slot","span","offset","width","height","margin","src","_v","display","bottom","position","_s","font-size","color","top","gutter","_l","index","key","on","click","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/26.84729064026d317f0c00.js","sourcesContent":["<template>\r\n\t<div style=\"margin-top:10rpx;\">\r\n\t\t<van-panel use-footer-slot >\r\n\t\t\t<view slot=\"header\">\r\n\t\t\t\t<!--使用header slot进行自定义-->\r\n\t\t\t\t<van-row>\r\n\t\t\t\t\t<van-col span=\"12\" offset=\"1\">\r\n\t\t\t\t\t\t<image :src=\"avatarUrl\" style=\"width: 70rpx;height:70rpx;margin: 7rpx;\"></image> <text style=\"display: inline-block;bottom: 25rpx;position: relative;\">{{userName}}</text>\r\n\r\n\t\t\t\t\t</van-col>\r\n\t\t\t\t\t<van-col span=\"7\" offset=\"4\">\r\n\t\t\t\t\t\t<text style=\"font-size: small;color:lightgray;display:inline-block;top:16rpx;position: relative;\">{{timeFormat}}</text>\r\n\t\t\t\t\t</van-col>\r\n\t\t\t\t</van-row>\r\n\t\t\t</view>\r\n\t\t\t<view slot=\"footer\">\r\n\t\t\t\t<!--使用footer slot进行自定义-->\r\n\t\t\t\t<van-row gutter=\"20\">\r\n\t\t\t\t\t<van-col span=\"12\" offset=\"3\">\r\n\t\t\t\t\t\t<image v-for=\"(dianzan,index) in dianzans\" :key=\"index\" :src=\"dianzan.avatarUrl\" style=\"width: 50rpx;height:50rpx;\"></image>\r\n\t\t\t\t\t</van-col>\r\n\t\t\t\t\t<van-col span=\"3\" offset=\"18\" @click=\"dianzan\">\r\n\t\t\t\t\t\t<van-icon :name=\"state ? 'like' :'like-o'\"  :color=\"state ? '#f47983':'grey'\" size=\"1.2em\"/>\r\n\t\t\t\t\t</van-col>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!--\r\n\t\t\t\t\t<van-col span=\"3\">\r\n\t\t\t\t\t\t<van-icon name=\"chat-o\" />\r\n\t\t\t\t\t</van-col>\r\n\t\t\t\t\t* \r\n\t\t\t\t\t* \r\n\t\t\t\t\t* -->\r\n\t\t\t\t</van-row>\r\n\t\t\t</view>\r\n\t\t\t<van-row>\r\n\t\t\t\t<van-col span=\"17\" offset=\"4\">\r\n\t\t\t\t\t<view style=\"margin:2% 0%;\">{{content}}</view>\r\n\t\t\t\t</van-col>\r\n\t\t\t</van-row>\r\n\r\n\t\t</van-panel>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'LoveItem',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t\r\n\t\t\t\tdianzans: '',\r\n\t\t\t\tstate: false,//用来表示是否已经点过赞\r\n\t\t\t}\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\t//biaobai: '',\r\n\t\t\tid: '',\r\n\t\t\tuserName: '',\r\n\t\t\tavatarUrl: '',\r\n\t\t\tcontent: '',\r\n\t\t\tcreate_time: '',\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttimeFormat: function() {\r\n\t\t\t\t//将过去的时间表示为 易于看懂的格式\r\n\t\t\t\tvar create_time = new Date(this.create_time);\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tvar ans = create_time.getHours() + \":\" + create_time.getMinutes();\r\n\t\t\t\tif (create_time.toLocaleDateString().localeCompare(now.toLocaleDateString()) == 0) return ans;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar now0 = new Date(now.toLocaleDateString());\r\n\t\t\t\t\tvar riqicha = (now0.getTime() - create_time.getTime()) / 1000 / 60 / 60 / 24;\r\n\t\t\t\t\tif (riqicha < 1) ans = '昨天 ' + ans;\r\n\t\t\t\t\telse if (riqicha < 2) ans = '前天 ' + ans;\r\n\t\t\t\t\telse ans = (create_time.getMonth() + 1) + \"-\" + (create_time.getDate()) + \" \" + ans;\r\n\t\t\t\t\tif (create_time.getFullYear() != now.getFullYear()) ans = (create_time.getFullYear()) + \"-\" + ans;\r\n\t\t\t\t\treturn ans;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tdianzans:function(){\r\n\t\t\t\tthis.state=this.dianzanState();\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted: function() {\r\n\t\t\tthis.getDianzansById();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//进行点赞\r\n\t\t\tdianzan: function() {\r\n\t\t\t\tif (this.state){\r\n\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\ttitle: '已经点过了',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tthis.qcloud.request({\r\n\t\t\t\t\turl:this.config.service.host+'/weapp/dianzan/'+ self.id,\r\n\t\t\t\t\t//url: 'https://weapp.yuyongbo.cn/weapp/dianzan/' + self.id,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\t\t//showSuccess(response.data[0]);\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t//this.getDianzan();\r\n\t\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\t\ttitle: '点赞成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.state=true;\r\n\t\t\t\t\t\tself.getDianzansById();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//async 表示是异步函数 //获取所有点赞数据\r\n\t\t\tgetDianzansById: function() {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\r\n\t\t\t\tthis.qcloud.request({\r\n\t\t\t\t\turl:this.config.service.host+'/weapp/dianzan/'+ self.id,\r\n\t\t\t\t\t//url: 'https://weapp.yuyongbo.cn/weapp/dianzan/' + this.id,\r\n\t\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\t\tself.dianzans = response.data.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdianzanState: function() {\r\n\t\t\t\t\r\n\t\t\t\tif (null ==this.dianzans)return;\r\n\t\t\t\t\r\n\t\t\t\tconst session = this.qcloud.Session.get();\r\n\t\t\t\t//如果用户已经登录\r\n\t\t\t\tif(session){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar openId=session.userinfo.openId;\r\n\t\t\t\t\t//wx.showToast({title: openId+'状态检查',icon: 'success'});\r\n\t\t\t\t\tif (null!=openId) { //刚开始的时候globalData可能还是null（没有授权）\r\n\t\t\t\t\t\tfor (var i = 0; i < this.dianzans.length; i++) {\r\n\t\t\t\t\t\t\tif (this.dianzans[i].openId.localeCompare(openId) == 0) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/quan/LoveItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin-top\":\"10rpx\"}},[_c('van-panel',{attrs:{\"use-footer-slot\":\"\"}},[_c('view',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('van-row',[_c('van-col',{attrs:{\"span\":\"12\",\"offset\":\"1\"}},[_c('image',{staticStyle:{\"width\":\"70rpx\",\"height\":\"70rpx\",\"margin\":\"7rpx\"},attrs:{\"src\":_vm.avatarUrl}}),_vm._v(\" \"),_c('text',{staticStyle:{\"display\":\"inline-block\",\"bottom\":\"25rpx\",\"position\":\"relative\"}},[_vm._v(_vm._s(_vm.userName))])]),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"7\",\"offset\":\"4\"}},[_c('text',{staticStyle:{\"font-size\":\"small\",\"color\":\"lightgray\",\"display\":\"inline-block\",\"top\":\"16rpx\",\"position\":\"relative\"}},[_vm._v(_vm._s(_vm.timeFormat))])])],1)],1),_vm._v(\" \"),_c('view',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('van-row',{attrs:{\"gutter\":\"20\"}},[_c('van-col',{attrs:{\"span\":\"12\",\"offset\":\"3\"}},_vm._l((_vm.dianzans),function(dianzan,index){return _c('image',{key:index,staticStyle:{\"width\":\"50rpx\",\"height\":\"50rpx\"},attrs:{\"src\":dianzan.avatarUrl}})}),0),_vm._v(\" \"),_c('van-col',{attrs:{\"span\":\"3\",\"offset\":\"18\"},on:{\"click\":_vm.dianzan}},[_c('van-icon',{attrs:{\"name\":_vm.state ? 'like' :'like-o',\"color\":_vm.state ? '#f47983':'grey',\"size\":\"1.2em\"}})],1)],1)],1),_vm._v(\" \"),_c('van-row',[_c('van-col',{attrs:{\"span\":\"17\",\"offset\":\"4\"}},[_c('view',{staticStyle:{\"margin\":\"2% 0%\"}},[_vm._v(_vm._s(_vm.content))])])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0a393708\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/quan/LoveItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0a393708\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./LoveItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LoveItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LoveItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a393708\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./LoveItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/quan/LoveItem.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}